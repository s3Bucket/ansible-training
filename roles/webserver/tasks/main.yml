- name: Install Apache
  package:
    name: "{{ apache_package }}"
    state: present
  vars:
    apache_package: "{{ 'httpd' if ansible_os_family == 'RedHat' else 'apache2' }}"

- name: Set custom variable
  set_fact:
    custom_message: "Welcome to the Ansible Challenge!"

- name: Deploy index.html with template
  template:
    src: index.html.j2
    dest: /var/www/html/index.html

- name: Deploy solution.js with template
  template:
    src: solution.js.j2
    dest: /var/www/html/solution.js

- name: Copy fun image
  copy:
    src: fun_image.jpg
    dest: /var/www/html/fun_image.jpg

- name: Ensure Apache is running
  service:
    name: "{{ apache_service }}"
    state: started
    enabled: true
  vars:
    apache_service: "{{ 'httpd' if ansible_os_family == 'RedHat' else 'apache2' }}"
  notify:
    - Restart Apache
